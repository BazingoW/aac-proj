library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.numeric_std.all;

entity InstructionMemory is
    Port ( Address : in STD_LOGIC_VECTOR (7 downto 0);
           DataOut : out STD_LOGIC_VECTOR (31 downto 0));
end InstructionMemory;

architecture Structural of InstructionMemory is
type storage_type is array (0 to 255) of std_logic_vector(31 downto 0);

----------------------------------------------------------------------------------------------------
-- TEST MEMORY
----------------------------------------------------------------------------------------------------
signal storage: storage_type := (
     0 => "00000100010000000000001000000000",   --  ADDI    R1,R0,#512
     1 => "00000100100000000000000000000001",   --  ADDI    R2,R0,#1
     2 => "01011000000001001000000000000000",   --  ST      0(R1),R2
     3 => "00000000010001001000000000000000",   --  ADD     R1,R1,R2
     4 => "01010001000001000000000000000000",   --  LD      R4,R0(R1)
     5 => "000001" & "0001" & "0000" & "000000000000001101",     -- ADDI  R1,R0,#15
     6 => "010111" & "0011" & "0010" &   "0010"&"00000000000101",-- BR NEQ   R2,R2,5
     7 => "00000100110000000000001000000000",   --  ADDI    R3,R0,#512
     8 => "000001" & "0100" & "0000" & "000000001000000001",     --R4,R0,#513
     9 => "011010" & "1011" & "0001" &   "0001"&"00001000000001",   --  JIL.LT  R3,#513,R1
    10 => "000001" & "1111" & "0000" & "000000000000000100", --ADDI  R15,R0,#4
    11 => "000001" & "1111" & "0000" & "000000000000000100", --ADDI  R15,R0,#4
    12 => "000001" & "1111" & "0000" & "000000000000000100", --ADDI  R15,R0,#4
    15 => "000000" & "1111" & "0000" & "1111"  &"00000000000000",   --        ADD   R15,R0,R15 -should be 101 (LINK CONFIRMED?)
    others => "00000000000000000000000000000000"   --  NOP
	);


begin

DataOut <= storage(to_integer(unsigned(Address)));

end Structural;
